<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>서울시 빈집85 </title>
</head>
<body>
	<div id="map" style="width:100%;height:100vh;"></div>

	<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=e469d84101adbf4335d03bbaeb9435e6&libraries=clusterer"></script>
	<script>
		var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
		    mapOption = {
		        center: new kakao.maps.LatLng(37.57337893, 126.9668701), // 지도의 중심좌표
		        level: 8, // 지도의 확대 레벨
		        mapTypeId : kakao.maps.MapTypeId.ROADMAP // 지도종류
		    }; 

		// 지도를 생성한다 
		var map = new kakao.maps.Map(mapContainer, mapOption); 

		// 마커 클러스터러를 생성합니다 
		var clusterer = new kakao.maps.MarkerClusterer({
			map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
			averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
			minLevel: 7 // 클러스터 할 최소 지도 레벨 
		});

		var sd_address_data = [[37.62868108, 127.0225358, "01:제2종:미아동 222-110"],
				[37.62211299, 127.0188499, "02:제2종:미아동 745-128"],
				[37.62992902, 127.0221248, "03:제2종:미아동 237-5(237-5, 237-36, 791-12)"],
				[37.6262025, 127.0125911, "04:제2종:미아동 791-1524"],
				[37.62165783, 127.0142097, "05:제2종:미아동 791-2038"],
				[37.62160133, 127.0143104, "06:제2종:미아동 791-2681"],
				[37.6217267, 127.014653, "07:제2종:미아동 791-2045"],
				[37.62174014, 127.0152641, "08:제2종:미아동 791-2063"],
				[37.62157063, 127.014802, "09:제2종:미아동 791-2068(791-2068, 791-2069)"],
				[37.62422478, 127.0146683, "10:제2종:미아동 791-1855(791- 1855, 791-2554)"],
				[37.6243791, 127.0140544, "11:제2종:미아동 791-2709"],
				[37.62292703, 127.015781, "12:제2종:미아동 791-3094"],
				[37.62454063, 127.0142386, "13:제2종:미아동 791-2557(791-2557, 791-4499)"],
				[37.62796778, 127.0188559, "14:제3종:미아동 793-32"],
				[37.62232851, 127.0170571, "15:제2종:미아동 835-20"],
				[37.62289729, 127.0151989, "16:제2종:미아동 791-2829"],
				[37.6208987, 127.0172528, "17:제2종:미아동 839-432"],
				[37.63321005, 127.0298932, "18:제1종:번동 526-80"],
				[37.62630309, 127.0113119, "19:제1종:수유동 486-1243(486-1243, 1253)"],
				[37.46649936, 126.9397838, "20:제2종:신림동 251-496"],
				[37.53478063, 127.0656601, "21:제2종:자양동 50-26"],
				[37.5028001, 126.8645245, "22:제2종:고척동 52-68"],
				[37.50268821, 126.8647009, "23:제2종:고척동 52-70"],
				[37.50045125, 126.8561987, "24:제2종:고척동 98-54"],
				[37.50403244, 126.8514407, "25:제1종:고척동 263-2"],
				[37.49923242, 126.8440949, "26:제2종:오류동 19-93(19-93, 19-95)"],
				[37.49228705, 126.8473665, "27:제1종:오류동 145-110"],
				[37.62215581, 127.056935, "28:제1종:월계동 516-2"],
				[37.65305963, 127.0231177, "29:제1종:쌍문동 460-51"],
				[37.63834585, 127.0420199, "30:제1종:창동 461--"],
				[37.58333027, 127.0369505, "31:제2종:제기동 887-66"],
				[37.49782065, 126.9376536, "32:제2종:상도동 237-13"],
				[37.49731981, 126.9318362, "33:제2종:상도동 256-80"],
				[37.49836561, 126.9323126, "34:제2종:상도동 256-114(256-114, 256-116, 256-117)"],
				[37.4973898, 126.9363172, "35:제2종:상도동 264-3"],
				[37.50735771, 126.9563456, "36:제1종:흑석동 204-107"],
				[37.54496501, 126.914149, "37:제1종:합정동 200-26"],
				[37.59800696, 126.9508801, "38:제1종:홍은동 8-807"],
				[37.60160729, 126.9470704, "39:제1종:홍은동 11-149"],
				[37.55052673, 127.0196035, "40:제2종:금호동3가 1253-4(1253-4, 1260-2)"],
				[37.56165821, 127.0463128, "41:제2종:사근동 212-16"],
				[37.55650076, 127.035582, "42:제2종:행당동 128-449"],
				[37.60816584, 127.0221427, "43:제3종:길음동 1196--"],
				[37.58753224, 127.0047925, "44:제2종:삼선동1가 11-87"],
				[37.58420506, 127.0079205, "45:제1종:삼선동1가 278-39"],
				[37.58313415, 127.0078424, "46:제1종:삼선동1가 290-10"],
				[37.5829444, 127.0077528, "47:제1종:삼선동1가 290-31"],
				[37.58758445, 127.0169907, "48:제2종:삼선동5가 237--"],
				[37.60562756, 127.0520112, "49:제1종:석관동 338-682"],
				[37.59493527, 126.9960084, "50:제1종:성북동 84-5(84-5, 85-20)"],
				[37.61412788, 127.0444385, "51:제2종:장위동 225-86"],
				[37.61215237, 127.0129586, "52:제2종:정릉동 266-346"],
				[37.60859019, 127.0114535, "53:제2종:정릉동 402-182"],
				[37.59920777, 127.0100949, "54:제2종:정릉동 559-47(559-47, 559-48, 559-132)"],
				[37.60628006, 127.0016165, "55:제1종:정릉동 642-6"],
				[37.60597986, 127.0008006, "56:제1종:정릉동 894-50"],
				[37.60706175, 126.9977893, "57:제1종:정릉동 897-36"],
				[37.59811092, 127.0278658, "58:제3종:종암동 57-91(57-91, 57-93, 57-176)"],
				[37.60566465, 127.0331001, "59:제2종:하월곡동 90-1320"],
				[37.51028699, 126.8962869, "60:준공업:도림동 202-20"],
				[37.54560303, 126.9832824, "61:제1종:용산동2가 1-287"],
				[37.54535547, 126.9822867, "62:제1종:용산동2가 1-422"],
				[37.54481964, 126.9822142, "63:제1종:용산동2가 1-718(1-718, 1-1247)"],
				[37.54445875, 126.9837911, "64:제1종:용산동2가 5-1155(5-1155, 5-1156)"],
				[37.54381269, 126.9828713, "65:제1종:용산동2가 5-1332"],
				[37.54414052, 126.9808501, "66:제1종:용산동2가 9-14"],
				[37.54388201, 126.9818988, "67:제1종:용산동2가 10-51"],
				[37.53899473, 126.9894303, "68:제2종:이태원동 224-32"],
				[37.54756021, 126.9834628, "69:제1종:후암동 406-106"],
				[37.57337893, 126.9668701, "70:제2종:사직동 181-5"],
				[37.58322036, 126.9657763, "71:제1종:옥인동 47-285(47-285, 47-368)"],
				[37.58357463, 126.966404, "72:제1종:옥인동 47-390"],
				[37.57688942, 127.0105216, "73:제2종:창신동 595-51"],
				[37.57667946, 127.0117856, "74:제2종:창신동 595-61"],
				[37.57682898, 127.011309, "75:제2종:창신동 595-161"],
				[37.5753792, 127.0078991, "76:제1종:충신동 1-194"],
				[37.5762302, 127.0076771, "77:제1종:충신동 1-237"],
				[37.57668643, 127.008256, "78:제1종:충신동 1-389(1-389, 1-390)"],
				[37.57472975, 127.0080715, "79:제1종:충신동 18-15"],
				[37.57457587, 127.00796, "80:제1종:충신동 18-28"],
				[37.57476688, 127.0079782, "81:제1종:충신동 18-72"],
				[37.57491856, 126.9632657, "82:제2종:행촌동 210-311"],
				[37.58200883, 126.9724575, "83:제2종:효자동 164-16"],
				[37.58978597, 127.0955428, "84:제3종:면목동 23-27"],
				[37.60514849, 127.0972042, "85:제2종:신내동 458-2"]


			];


		var markers = [];

		for (var i = 0; i < sd_address_data.length; i++) {
			// 지도에 마커를 생성하고 표시한다
			var marker = new kakao.maps.Marker({
				position: new kakao.maps.LatLng(sd_address_data[i][0],sd_address_data[i][1]), // 마커의 좌표
				map: map // 마커를 표시할 지도 객체
			});

			// 마커 위에 표시할 인포윈도우를 생성한다
			var infowindow = new kakao.maps.InfoWindow({
				content : sd_address_data[i][2] // 인포윈도우에 표시할 내용
			});

			// 인포윈도우를 지도에 표시한다
			//infowindow.open(map, marker);
			markers.push(marker); //클러스터러
				
			// 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
			// 이벤트 리스너로는 클로저를 만들어 등록합니다 
			// for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
			kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
			kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
		}
		clusterer.addMarkers(markers);


		// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
		function makeOverListener(map, marker, infowindow) {
			return function() {
				infowindow.open(map, marker);
			};
		}

		// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
		function makeOutListener(infowindow) {
			return function() {
				infowindow.close();
			};
		}

	</script>
</body>
</html>
