<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>다음 지도 API</title>
</head>
<body>
	<div id="map" style="width:100%;height:100vh;"></div>

	<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=e469d84101adbf4335d03bbaeb9435e6&libraries=clusterer"></script>
	<script>
		var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
		    mapOption = {
		        center: new kakao.maps.LatLng(37.54418, 127.06934), // 지도의 중심좌표
		        level: 6, // 지도의 확대 레벨
		        mapTypeId : kakao.maps.MapTypeId.ROADMAP // 지도종류
		    }; 

		// 지도를 생성한다 
		var map = new kakao.maps.Map(mapContainer, mapOption); 

		// 마커 클러스터러를 생성합니다 
		var clusterer = new kakao.maps.MarkerClusterer({
			map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
			averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
			minLevel: 4 // 클러스터 할 최소 지도 레벨 
		});

		var sd_address_data = [
			// [37.553210,126.972614,'내용1'],
			// [37.558907,126.978305,'내용2'],
			// [37.533647,126.971986,'내용3']	
			// [37.55888731, 127.0476252, '신청취소'], [37.55931902, 127.0475156, '-'], [37.56004463, 127.045823, '환기팬 2']
			// , [37.56000466, 127.0457478, '-'], [37.55995549, 127.0456713, '-'], [37.55993523, 127.0463226, '-'], [37.56056804, 127.0464703, '-'], [37.56056833, 127.0461881, '-'], [37.56068949, 127.0460065, '-'], [37.56064703, 127.0460691, '방범창2'], [37.56045364, 127.0466196, '방범창 3'], [37.56073577, 127.046104, '-'], [37.56074005, 127.0457539, '환기팬 1'], [37.56051246, 127.0466533, '-'], [37.56044049, 127.046393, '-']
			// , [37.56053925, 127.0481547, '환기팬4'], [37.56034523, 127.0478095, '역지변4'], [37.56038277, 127.0481, '환기팬1'], [37.56061193, 127.0473504, '환기팬1'], [37.56014859, 127.0476782, '환기팬1'], [37.56005838, 127.0477281, '환기팬3'], [37.56009961, 127.0473727, '신청취소(설치돼있다고함)'], [37.56014205, 127.0469236, '-'], [37.56019568, 127.0470865, '환기팬2'], [37.55977451, 127.0474366, '-'], [37.55993484, 127.0468731, '환기팬4']
			// , [37.55984056, 127.0471884, '-'], [37.55977162, 127.047222, '-'], [37.55966556, 127.0476896, '신청취소'], [37.55966556, 127.0476896, '환기팬2'], [37.55966556, 127.0476896, '환기팬1'], [37.55956426, 127.0471016, '-'], [37.55939501, 127.0474149, '-']
			// , [37.55947317, 127.0473232, '-'], [37.56004489, 127.0478879, '-'], [37.55984669, 127.0478421, '-'], [37.56017838, 127.0482198, '환기팬2'], [37.55954709, 127.0487738, '-'], [37.55950012, 127.0488509, '-'], [37.55940201, 127.0486091, '-'], [37.55935748, 127.0486615, '-'], [37.55998658, 127.0490287, '환기팬2']
			// // , [he address: Cannot find, 서울특별시 성동구 사근동 201 - 20, , '-']
			// , [37.56126008, 127.0478445, '-'], [37.56134376, 127.0476882, '-']
			// // , [he address: Cannot find, 서울특별시 성동구 사근동 20 - 6, , '-']
			// , [37.56133239, 127.0475056, '-'], [37.56111585, 127.0473619, '-'], [37.56112547, 127.0471979, '-'], [37.56183116, 127.0471031, '-'], [37.56173924, 127.0478254, '환기팬1'], [37.5620276, 127.0474971, '-'], [37.56202594, 127.0473751, '역지변1'], [37.56208138, 127.0473096, '환기팬1'], [37.56194662, 127.0470095, '역지변8'], [37.56208003, 127.0470655, '-'], [37.56202333, 127.0471522, '환기팬1'], [37.56176618, 127.0476059, '환기팬5'], [37.56208033, 127.0481134, '-'], [37.56200975, 127.0479682, '환기팬3'], [37.5623512, 127.0473803, '환기팬1'], [37.5629433, 127.0463224, '환기팬1'], [37.5630432, 127.0463741, '환기팬1'], [37.56300668, 127.0464604, '환기팬 1'], [37.56281906, 127.0467647, '-'], [37.56314163, 127.0467302, '환기팬2'], [37.56324937, 127.0472413, '-'], [37.56325604, 127.0474435, '환기팬2'], [37.56297725, 127.0470632, '-'], [37.56374368, 127.0469513, '-'], [37.5643281, 127.0470963, '1층(설치안됨안내)'], [37.5642437, 127.0470203, '역지변1'], [37.56407939, 127.0471892, '-'], [37.56395137, 127.0471589, '-'], [37.56363884, 127.0470896, '-'], [37.56416003, 127.0476317, '환기팬2'], [37.56403413, 127.0474894, '방범창1'], [37.56394573, 127.0475168, '방범창1'], [37.56080604, 127.0451912, '-'], [37.56090913, 127.0451467, '-'], [37.56020922, 127.0432636, '신청취소'], [37.56019017, 127.0431272, '환기팬1'], [37.56030165, 127.0430323, '-'], [37.56035172, 127.0428776, '-'], [37.56035172, 127.0428776, '-'], [37.5602671, 127.043403, '-'], [37.56047186, 127.0432615, '환기팬5'], [37.56045977, 127.0430684, '-'], [37.56016527, 127.0458278, '-'], [37.56002349, 127.0454933, '환기팬1']

			[37.55888731,127.0476252,"신청취소"],[37.55931902,127.0475156,"-"],[37.56004463,127.045823,"환기팬 2"],[37.56000466,127.0457478,"-"],[37.55995549,127.0456713,"-"],[37.55993523,127.0463226,"-"],[37.56056804,127.0464703,"-"],[37.56056833,127.0461881,"-"],[37.56068949,127.0460065,"-"],[37.56064703,127.0460691,"방범창2"],[37.56045364,127.0466196,"방범창 3"],[37.56073577,127.046104,"-"],[37.56074005,127.0457539,"환기팬 1"],[37.56051246,127.0466533,"-"],[37.56044049,127.046393,"-"],[37.56053925,127.0481547,"환기팬4"],[37.56034523,127.0478095,"역지변4"],[37.56038277,127.0481,"환기팬1"],[37.56061193,127.0473504,"환기팬1"],[37.56014859,127.0476782,"환기팬1"],[37.56005838,127.0477281,"환기팬3"],[37.56009961,127.0473727,"신청취소(설치돼있다고함)"],[37.56014205,127.0469236,"-"],[37.56019568,127.0470865,"환기팬2"],[37.55977451,127.0474366,"-"],[37.55993484,127.0468731,"환기팬4"],[37.55984056,127.0471884,"-"],[37.55977162,127.047222,"-"],[37.55966556,127.0476896,"신청취소"],[37.55966556,127.0476896,"환기팬2"],[37.55966556,127.0476896,"환기팬1"],[37.55956426,127.0471016,"-"],[37.55939501,127.0474149,"-"],[37.55947317,127.0473232,"-"],[37.56004489,127.0478879,"-"],[37.55984669,127.0478421,"-"],[37.56017838,127.0482198,"환기팬2"],[37.55954709,127.0487738,"-"],[37.55950012,127.0488509,"-"],[37.55940201,127.0486091,"-"],[37.55935748,127.0486615,"-"],[37.55998658,127.0490287,"환기팬2"],[37.56126008,127.0478445,"-"],[37.56134376,127.0476882,"-"],[37.56133239,127.0475056,"-"],[37.56111585,127.0473619,"-"],[37.56112547,127.0471979,"-"],[37.56183116,127.0471031,"-"],[37.56173924,127.0478254,"환기팬1"],[37.5620276,127.0474971,"-"],[37.56202594,127.0473751,"역지변1"],[37.56208138,127.0473096,"환기팬1"],[37.56194662,127.0470095,"역지변8"],[37.56208003,127.0470655,"-"],[37.56202333,127.0471522,"환기팬1"],[37.56176618,127.0476059,"환기팬5"],[37.56208033,127.0481134,"-"],[37.56200975,127.0479682,"환기팬3"],[37.5623512,127.0473803,"환기팬1"],[37.5629433,127.0463224,"환기팬1"],[37.5630432,127.0463741,"환기팬1"],[37.56300668,127.0464604,"환기팬 1"],[37.56281906,127.0467647,"-"],[37.56314163,127.0467302,"환기팬2"],[37.56324937,127.0472413,"-"],[37.56325604,127.0474435,"환기팬2"],[37.56297725,127.0470632,"-"],[37.56374368,127.0469513,"-"],[37.5643281,127.0470963,"1층(설치안됨안내)"],[37.5642437,127.0470203,"역지변1"],[37.56407939,127.0471892,"-"],[37.56395137,127.0471589,"-"],[37.56363884,127.0470896,"-"],[37.56416003,127.0476317,"환기팬2"],[37.56403413,127.0474894,"방범창1"],[37.56394573,127.0475168,"방범창1"],[37.56080604,127.0451912,"-"],[37.56090913,127.0451467,"-"],[37.56020922,127.0432636,"신청취소"],[37.56019017,127.0431272,"환기팬1"],[37.56030165,127.0430323,"-"],[37.56035172,127.0428776,"-"],[37.56035172,127.0428776,"-"],[37.5602671,127.043403,"-"],[37.56047186,127.0432615,"환기팬5"],[37.56045977,127.0430684,"-"],[37.56016527,127.0458278,"-"],[37.56002349,127.0454933,"환기팬1"],[37.56304514,127.0343869,"신청취소"],[37.5642289,127.033967,"-"],[37.5641602,127.033184,"환기팬2"],[37.56400433,127.0331621,"-"],[37.56402132,127.0329757,"-"],[37.56382188,127.0331632,"-"],[37.56373498,127.0330095,"환기팬2"],[37.56417636,127.0330576,"-"],[37.56457532,127.0330657,"-"],[37.56455978,127.0332297,"차수판4"],[37.56385823,127.0336382,"환기팬2"],[37.5637814,127.0335639,"-"],[37.56382894,127.033991,"환기팬2"],[37.56609338,127.0341129,"-"],[37.56607351,127.033978,"-"],[37.56777071,127.0320662,"-"],[37.56551393,127.0341764,"-"],[37.56519113,127.0337771,"환기팬2"],[37.56532165,127.033587,"신청취소"],[37.56317163,127.0334685,"환기팬2"],[37.56583826,127.0323788,"환기팬1"],[37.56431343,127.031956,"방범창2"],[37.56442166,127.0325751,"-"],[37.56461163,127.0320958,"환기팬1"],[37.5651733,127.0307668,"환기팬 1"],[37.5650941,127.0307665,"환기팬1"],[37.56498816,127.0307042,"-"],[37.56470905,127.0306308,"환기팬1"],[37.56502095,127.0303892,"환기팬4"],[37.56526728,127.0304171,"신청취소"],[37.56158802,127.0393846,"-"],[37.56016921,127.0425216,"-"],[37.56104344,127.0402292,"환기팬6"],[37.55875494,127.0396016,"-"],[37.55892692,127.0393865,"환기팬2"],[37.55882967,127.0400233,"환기팬6"],[37.55662899,127.0425939,"-"],[37.55685281,127.0420651,"환기팬4"],[37.56060217,127.0395782,"환기팬4"],[37.55648647,127.0412674,"-"],[37.5564403,127.0413913,"신청취소"],[37.55701146,127.0410786,"-"],[37.55675603,127.0413259,"환기팬5"],[37.55655461,127.0414695,"-"],[37.56017301,127.0398921,"환기팬5"],[37.56627669,127.0306488,"-"],[37.56680302,127.0317937,"-"]

			];


		var markers = [];

		for (var i = 0; i < sd_address_data.length; i++) {
			// 지도에 마커를 생성하고 표시한다
			var marker = new kakao.maps.Marker({
				position: new kakao.maps.LatLng(sd_address_data[i][0],sd_address_data[i][1]), // 마커의 좌표
				map: map // 마커를 표시할 지도 객체
			});

			// 마커 위에 표시할 인포윈도우를 생성한다
			var infowindow = new kakao.maps.InfoWindow({
				content : sd_address_data[i][2] // 인포윈도우에 표시할 내용
			});

			// 인포윈도우를 지도에 표시한다
			//infowindow.open(map, marker);
			markers.push(marker); //클러스터러
				
			// 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
			// 이벤트 리스너로는 클로저를 만들어 등록합니다 
			// for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
			kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
			kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
		}
		clusterer.addMarkers(markers);


		// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
		function makeOverListener(map, marker, infowindow) {
			return function() {
				infowindow.open(map, marker);
			};
		}

		// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
		function makeOutListener(infowindow) {
			return function() {
				infowindow.close();
			};
		}

	</script>
</body>
</html>